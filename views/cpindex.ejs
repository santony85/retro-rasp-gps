<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>OpenStreetMap &amp; OpenLayers - Marker Example</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
	<script src="https://openlayers.org/en/v4.6.5/build/ol.js" type="text/javascript"></script>
	
	
	<script>
var map = new ol.Map({
	layers: [
	  new ol.layer.Tile({
		source: new ol.source.OSM({
			  url: "https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"
		})
	  })
	],
	target: 'map',
	controls: ol.control.defaults({
	  attributionOptions: {
		collapsible: false
	  }
	}),
	view: new ol.View({
	  center: [0, 0],
	  zoom: 2
	})
  });

  /*document.getElementById('zoom-out').onclick = function() {
	var view = map.getView();
	var zoom = view.getZoom();
	view.setZoom(zoom - 1);
  };

  document.getElementById('zoom-in').onclick = function() {
	var view = map.getView();
	var zoom = view.getZoom();
	view.setZoom(zoom + 1);
  };*/
	  </script>
  
  <script>
	/* OSM & OL example code provided by https://mediarealm.com.au/ */
	//var map;
	/*var mapLat = -33.829357;
		var mapLng = 150.961761;
	var mapDefaultZoom = 10;
	
	var vectorLayer;
	var view;
	
	function initialize_map() {
	  map = new ol.Map({
		target: "map",
		layers: [
			new ol.layer.Tile({
				source: new ol.source.OSM({
					  url: "https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"
				})
			})
		],
		view: new ol.View({
			center: ol.proj.fromLonLat([mapLng, mapLat]),
			zoom: mapDefaultZoom
		})
	  });
	}

	function add_map_point(lat, lng) {
		vectorLayer = new ol.layer.Vector({
		source:new ol.source.Vector({
		  features: [new ol.Feature({
				geometry: new ol.geom.Point(ol.proj.transform([parseFloat(lng), parseFloat(lat)], 'EPSG:4326', 'EPSG:3857')),
			})]
		}),
		style: new ol.style.Style({
		  image: new ol.style.Icon({
			anchor: [0.5, 0.5],
			anchorXUnits: "fraction",
			anchorYUnits: "fraction",
			src: "https://upload.wikimedia.org/wikipedia/commons/e/ec/RedDot.svg"
		  })
		})
	  });

	  map.addLayer(vectorLayer); 
	}
*/

  </script>
</head>
<body onload="/*initialize_map(); add_map_point(-33.8688, 151.2093);*/">
  <div id="map" style="width: 100vw; height: 100vh;"></div>
  
  <script src="/assets/js/jquery.min.js"></script>
  <script src="/assets/js/jquery.scrolly.min.js"></script>
  <script src="/assets/js/jquery.poptrox.min.js"></script>
  <script src="/assets/js/browser.min.js"></script>
  <script src="/assets/js/breakpoints.min.js"></script>
  <script src="/assets/js/util.js"></script>
  <script src="/assets/js/socket.io.js"></script>
  <script src="/assets/js/main.js"></script>
  
  <script>
	  var socket = io();
	  socket.on('gps', function(res){
		  console.log(res)
		  //var pos = ol.proj.transform([parseFloat(res.lon), parseFloat(res.lat)], 'EPSG:4326', 'EPSG:3857');
		  //vectorLayer.setGeometry(new ol.geom.Point(pos));
		  //map.setCenter( ol.proj.fromLonLat([mapLng, mapLat]));
		  
		  //view.setZoom(18); 
		  //map.setCenter
	  });
  </script>
</body>
</html>
